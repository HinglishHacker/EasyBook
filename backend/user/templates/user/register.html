
{% extends 'base.html' %}
{% load form_tags %}
{% block title %}Регистрация{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh;">
    <div class="card shadow p-4" style="width: 100%; max-width: 500px;">
        <h3 class="text-center mb-4">Регистрация</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="id_first_name" class="form-label">Имя</label>
                {{ form.first_name|add_class:"form-control" }}
                {{ form.first_name.errors }}
            </div>
            <div class="mb-3">
                <label for="id_last_name" class="form-label">Фамилия</label>
                {{ form.last_name|add_class:"form-control" }}
                {{ form.last_name.errors }}
            </div>
            <div class="mb-3">
                <label for="id_phone" class="form-label">Телефон</label>
                {{ form.phone|add_class:"form-control" }}
                {{ form.phone.errors }}
            </div>
            <div class="mb-3">
                <label for="id_passport_number" class="form-label">Паспорт</label>
                {{ form.passport_number|add_class:"form-control" }}
                {{ form.passport_number.errors }}
            </div>
            <div class="mb-3">
                <label for="id_avatar" class="form-label">Аватар (необязательно)</label>
                {{ form.avatar|add_class:"form-control" }}
                {{ form.avatar.errors }}
            </div>
            <div class="mb-3">
                <label for="id_email" class="form-label">Email</label>
                {{ form.email|add_class:"form-control" }}
                {{ form.email.errors }}
            </div>
            <div class="mb-3">
                <label for="id_password1" class="form-label">Пароль</label>
                <div class="input-group">
                    {{ form.password1|add_class:"form-control" }}
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                </div>
                {{ form.password1.errors }}
            </div>

            <div class="mb-3">
                <label for="id_password2" class="form-label">Подтверждение пароля</label>
                <div class="input-group">
                    {{ form.password2|add_class:"form-control" }}
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                </div>
                {{ form.password2.errors }}
            </div>

            <button type="submit" class="btn btn-primary w-100 mt-3">Зарегистрироваться</button>
        </form>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const togglePassword1 = document.getElementById("togglePassword1");
    const password1 = document.getElementById("id_password1");
    togglePassword1.addEventListener("click", () => {
        const type = password1.getAttribute("type") === "password" ? "text" : "password";
        password1.setAttribute("type", type);
    });

    const togglePassword2 = document.getElementById("togglePassword2");
    const password2 = document.getElementById("id_password2");
    togglePassword2.addEventListener("click", () => {
        const type = password2.getAttribute("type") === "password" ? "text" : "password";
        password2.setAttribute("type", type);
    });
});
</script>
{% endblock %}
